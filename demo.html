<!DOCTYPE html>
<head>
    <title>WP Final</title>
    <link rel="stylesheet" href="mystyle.css">
</head>
<body>
    <div>
        <h1>匯率轉換工具</h1>
        <div>
            <label for="currency">請選擇貨幣</label>
            <select id="currency">
                <option value="USD">美金</option>
                <option value="EUR">歐元</option>
                <option value="JPY">日幣</option>
                <option value="KRW">韓元</option>
                <option value="AUD">澳幣</option>
            </select>
        </div>
        <div>
            <label for="amount">請輸入金額</label>
            <input type="text" id="amount">
            <button id="btn" onclick="loadDoc()">查詢</button>
            <br>
            <button id="btn" onclick="document.location.reload()">reset</button>
            <br>
            <p id="result"></p>
            <script>
                function loadDoc(){
                    const xhttp = new XMLHttpRequest();

                    xhttp.onload = function() {
                        exchange(this);
                    }

                    xhttp.open("GET", "./rate.xml");
                    xhttp.send();
                }
                function exchange(xml){
                    const xmlDoc = xml.responseXML;
                    var currency = document.getElementById("currency").value;
                    var amount = document.getElementById("amount").value;
                    if(amount ==0){
                        alert("請輸入金額");
                        return;
                    }
                    else if(amount<0){
                        alert("請輸入正確金額");
                        document.location.reload();
                    }
                    else if(amount%1!=0){
                        alert("請輸入正確金額");
                        document.location.reload();
                    }
                    else{
                        if(currency=="USD"){
                            document.getElementById("result").innerHTML = amount*xmlDoc.getElementsByTagName("USD")[0].childNodes[1].nodeValue;
                        }
                        else if(currency=="EUR"){
                            document.getElementById("result").innerHTML =amount*xmlDoc.getElementsByTagName("USD")[0].childNodes[1].nodeValue;
                        }
                        else if(currency=="JPY"){
                            document.getElementById("result").innerHTML = amount*xmlDoc.getElementsByTagName("USD")[0].childNodes[1].nodeValue;
                        }
                        else if(currency=="KRW"){
                            document.getElementById("result").innerHTML = amount*xmlDoc.getElementsByTagName("USD")[0].childNodes[1].nodeValue;
                        }
                        else if(currency=="AUD"){
                            document.getElementById("result").innerHTML = amount*xmlDoc.getElementsByTagName("USD")[0].childNodes[1].nodeValue;
                        }
                    }   
                }
            </script>
        </div>
    </div>
</body>
</html>
